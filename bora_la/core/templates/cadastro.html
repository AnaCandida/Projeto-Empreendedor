<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Cadastro de usuários</title>
    <!-- Inclua o CSS do Bootstrap 5 -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <!-- Inclua o Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css">
    <!-- Estilos globais -->
    <link rel="stylesheet" href="{% static 'bora_la/css/main.css' %}">

</head>
<body>
    <!-- Ícone de usuário no canto superior direito -->


<!-- Ícone de usuário no canto superior direito -->
<div class="position-fixed top-0 end-0 m-3">
    <div class="dropdown">
        <button class="btn btn-secondary dropdown-toggle" type="button" id="userDropdown" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-person-fill" viewBox="0 0 16 16">
                <path d="M3 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1H3Zm5-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"/>
            </svg>                 
             
        </button>
        <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="userDropdown">
            <li><a class="dropdown-item" href="#">Perfil</a></li>
        </ul>
    </div>
</div>
<div class="container mt-5">
    <form method="post" id="userForm">

        {% csrf_token %}

        <div class="form-group">
            <label for="user_type">Tipo de usuário:</label>
            <select class="form-select" name="user_type" id="user_type">
                <option value="1">Usuário Geral</option>
                <option value="2">Organizador de Evento</option>
            </select>
        </div>

        <div class="form-group">
            {{form_usuario.username.errors}}
            <label for="username">Username:</label>
            {{form_usuario.username}}
        </div>

        <div class="form-group">
            {{form_usuario.password1.errors}}
            <label for="password1">Senha:</label>
            {{form_usuario.password1}}
        </div>

        <div class="form-group">
            {{form_usuario.password2.errors}}
            <label for="password2">Confirmação de senha:</label>
            {{form_usuario.password2}}
        </div>

        <div class="form-group">
            <label for="nome">Nome:</label>
            <input type="text" class="form-control" name="nome" id="nome">
        </div>

        <div class="form-group">
            <label for="email">Email:</label>
            <input type="email" class="form-control" name="email" id="email">
        </div>

        <div class="form-group">
            <label for="telefone">Telefone:</label>
            <input type="tel" class="form-control" name="telefone" id="telefone" data-mask="(00) 00000-0000">
            <div class="form-check mt-2">
                <input class="form-check-input" type="checkbox" name="whatsapp" id="whatsapp">
                <label class="form-check-label" for="whatsapp">Whatsapp</label>
            </div>
        </div>

        <div class="form-group" id="razao_social_container" style="display: none;">
            <label for="razao_social">Razão Social:</label>
            <input type="text" class="form-control" name="razao_social" id="razao_social">
        </div>

        <label for="pref_categorias">Categorias preferenciais (até 4):</label>
        <div class="form-group">
            <div class="form-check">
                <input class="form-check-input" type="checkbox" name="pref_categorias[]" value="comida" id="categoriaComida">
                <label class="form-check-label" for="categoriaComida">Comida</label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="checkbox" name="pref_categorias[]" value="ar_livre" id="categoriaArLivre">
                <label class="form-check-label" for="categoriaArLivre">Ar Livre</label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="checkbox" name="pref_categorias[]" value="negocio_local" id="categoriaNegocioLocal">
                <label class="form-check-label" for="categoriaNegocioLocal">Negócio Local</label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="checkbox" name="pref_categorias[]" value="cultura" id="categoriaCultura">
                <label class="form-check-label" for="categoriaCultura">Cultura</label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="checkbox" name="pref_categorias[]" value="esporte" id="categoriaEsporte">
                <label class="form-check-label" for="categoriaEsporte">Esporte</label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="checkbox" name="pref_categorias[]" value="musica" id="categoriaMusica">
                <label class="form-check-label" for="categoriaMusica">Música</label>
            </div>
        </div>
       
    </div>

    <div class="form-group">
        <button type="submit" class="btn btn-primary">Cadastrar</button>
    </div>
</form>
</div>

<!-- Arquivos JS do Bootstrap e jQuery -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.mask/1.14.16/jquery.mask.min.js"></script>

<script>
$(document).ready(function() {
    $('#telefone').mask('(00) 00000-0000');
    
    var checkboxes = document.querySelectorAll('input[name="pref_categorias[]"]');
    var maxChecked = 4;

    checkboxes.forEach(function(checkbox) {
        checkbox.addEventListener('change', function() {
            var checkedCount = document.querySelectorAll('input[name="pref_categorias[]"]:checked').length;
            
            if (checkedCount > maxChecked) {
                this.checked = false;
            } else {
                checkboxes.forEach(function(cb) {
                    if (!cb.checked && checkedCount >= maxChecked) {
                        cb.disabled = true;
                    } else {
                        cb.disabled = false;
                    }
                });
            }
        });
    });

    $('#user_type').on('change', function () {
        var razaoSocialContainer = $('#razao_social_container');
        if (this.value === '2') {
            razaoSocialContainer.show();
        } else {
            razaoSocialContainer.hide();
        }
    });
});
</script>
</body>
</html>
